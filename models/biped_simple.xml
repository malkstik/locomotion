<mujoco model="simple_biped">
  <compiler angle="radian" coordinate="local" inertiafromgeom="true"/>

  <option timestep="0.005" gravity="0 0 -9.81" iterations="50" solver="Newton">
    <flag warmstart="enable"/>
  </option>

  <default>
    <geom contype="1" conaffinity="1" friction="0.9 0.005 0.0001" rgba="0.7 0.7 0.7 1"/>
    <joint damping="0.5" armature="0.01" limited="true"/>
    <position ctrllimited="true"/>
  </default>

  <asset>
    <texture name="grid" type="2d" builtin="checker" width="512" height="512" rgb1="0.2 0.3 0.2" rgb2="0.3 0.4 0.3"/>
    <material name="grid" texture="grid" texrepeat="2 2" texuniform="true" reflectance="0.1"/>
    <material name="robot" rgba="0.6 0.6 0.6 1"/>
  </asset>

  <worldbody>
    <!-- Ground plane -->
    <geom name="floor" type="plane" size="5 5 0.1" material="grid" condim="3"/>
    <light directional="true" pos="0 0 3" dir="0 0 -1" diffuse="0.8 0.8 0.8"/>
    <light directional="true" pos="0 0 3" dir="0.5 0.5 -1" diffuse="0.4 0.4 0.4"/>

    <!-- Robot torso (main body) -->
    <body name="torso" pos="0 0 0.8">
      <freejoint name="root"/>
      <inertial pos="0 0 0" mass="30" diaginertia="0.3 0.3 0.1"/>
      <geom name="torso_geom" type="box" size="0.2 0.15 0.1" material="robot"/>

      <!-- Left leg chain -->
      <body name="left_hip" pos="0 0.15 -0.1">
        <inertial pos="0 0 -0.2" mass="4" diaginertia="0.05 0.05 0.01"/>
        <geom name="left_hip_geom" type="sphere" size="0.05" rgba="0.5 0.5 0.5 1"/>

        <!-- Hip: 3 DOF (yaw, roll, pitch) -->
        <joint name="left_hip_yaw" type="hinge" axis="0 0 1" range="-0.5 0.5" pos="0 0 0"/>
        <joint name="left_hip_roll" type="hinge" axis="1 0 0" range="-0.3 0.3" pos="0 0 0"/>
        <joint name="left_hip_pitch" type="hinge" axis="0 1 0" range="-1.5 1.5" pos="0 0 0"/>

        <geom name="left_thigh" type="capsule" fromto="0 0 0 0 0 -0.4" size="0.04" rgba="0.3 0.3 0.8 1"/>

        <body name="left_knee" pos="0 0 -0.4">
          <inertial pos="0 0 -0.2" mass="3" diaginertia="0.04 0.04 0.01"/>

          <!-- Knee: 1 DOF (pitch) -->
          <joint name="left_knee_pitch" type="hinge" axis="0 1 0" range="0 2.5" pos="0 0 0"/>

          <geom name="left_shin" type="capsule" fromto="0 0 0 0 0 -0.4" size="0.035" rgba="0.2 0.2 0.7 1"/>

          <body name="left_ankle" pos="0 0 -0.4">
            <inertial pos="0.05 0 -0.03" mass="1" diaginertia="0.01 0.01 0.005"/>

            <!-- Ankle: 2 DOF (pitch, roll) -->
            <joint name="left_ankle_pitch" type="hinge" axis="0 1 0" range="-0.7 0.7" pos="0 0 0"/>
            <joint name="left_ankle_roll" type="hinge" axis="1 0 0" range="-0.3 0.3" pos="0 0 0"/>

            <geom name="left_foot" type="box" pos="0.05 0 -0.03" size="0.1 0.05 0.01" rgba="0.2 0.2 0.8 1" friction="1.0 0.005 0.0001"/>

            <!-- Contact sites for stable ground interaction -->
            <site name="left_heel" pos="-0.05 0 -0.04" size="0.01" rgba="1 0 0 0.3"/>
            <site name="left_toe" pos="0.15 0 -0.04" size="0.01" rgba="1 0 0 0.3"/>
            <site name="left_inner" pos="0.05 0.05 -0.04" size="0.01" rgba="1 0 0 0.3"/>
            <site name="left_outer" pos="0.05 -0.05 -0.04" size="0.01" rgba="1 0 0 0.3"/>
            <site name="left_center" pos="0.05 0 -0.04" size="0.01" rgba="1 0 0 0.3"/>
          </body>
        </body>
      </body>

      <!-- Right leg chain (mirror of left) -->
      <body name="right_hip" pos="0 -0.15 -0.1">
        <inertial pos="0 0 -0.2" mass="4" diaginertia="0.05 0.05 0.01"/>
        <geom name="right_hip_geom" type="sphere" size="0.05" rgba="0.5 0.5 0.5 1"/>

        <!-- Hip: 3 DOF (yaw, roll, pitch) -->
        <joint name="right_hip_yaw" type="hinge" axis="0 0 1" range="-0.5 0.5" pos="0 0 0"/>
        <joint name="right_hip_roll" type="hinge" axis="1 0 0" range="-0.3 0.3" pos="0 0 0"/>
        <joint name="right_hip_pitch" type="hinge" axis="0 1 0" range="-1.5 1.5" pos="0 0 0"/>

        <geom name="right_thigh" type="capsule" fromto="0 0 0 0 0 -0.4" size="0.04" rgba="0.8 0.3 0.3 1"/>

        <body name="right_knee" pos="0 0 -0.4">
          <inertial pos="0 0 -0.2" mass="3" diaginertia="0.04 0.04 0.01"/>

          <!-- Knee: 1 DOF (pitch) -->
          <joint name="right_knee_pitch" type="hinge" axis="0 1 0" range="0 2.5" pos="0 0 0"/>

          <geom name="right_shin" type="capsule" fromto="0 0 0 0 0 -0.4" size="0.035" rgba="0.7 0.2 0.2 1"/>

          <body name="right_ankle" pos="0 0 -0.4">
            <inertial pos="0.05 0 -0.03" mass="1" diaginertia="0.01 0.01 0.005"/>

            <!-- Ankle: 2 DOF (pitch, roll) -->
            <joint name="right_ankle_pitch" type="hinge" axis="0 1 0" range="-0.7 0.7" pos="0 0 0"/>
            <joint name="right_ankle_roll" type="hinge" axis="1 0 0" range="-0.3 0.3" pos="0 0 0"/>

            <geom name="right_foot" type="box" pos="0.05 0 -0.03" size="0.1 0.05 0.01" rgba="0.8 0.2 0.2 1" friction="1.0 0.005 0.0001"/>

            <!-- Contact sites for stable ground interaction -->
            <site name="right_heel" pos="-0.05 0 -0.04" size="0.01" rgba="1 0 0 0.3"/>
            <site name="right_toe" pos="0.15 0 -0.04" size="0.01" rgba="1 0 0 0.3"/>
            <site name="right_inner" pos="0.05 0.05 -0.04" size="0.01" rgba="1 0 0 0.3"/>
            <site name="right_outer" pos="0.05 -0.05 -0.04" size="0.01" rgba="1 0 0 0.3"/>
            <site name="right_center" pos="0.05 0 -0.04" size="0.01" rgba="1 0 0 0.3"/>
          </body>
        </body>
      </body>
    </body>
  </worldbody>

  <actuator>
    <!-- Left leg actuators (position control with PD gains) -->
    <position name="left_hip_yaw_act" joint="left_hip_yaw" kp="200" kv="10" ctrlrange="-0.5 0.5"/>
    <position name="left_hip_roll_act" joint="left_hip_roll" kp="200" kv="10" ctrlrange="-0.3 0.3"/>
    <position name="left_hip_pitch_act" joint="left_hip_pitch" kp="200" kv="10" ctrlrange="-1.5 1.5"/>
    <position name="left_knee_pitch_act" joint="left_knee_pitch" kp="150" kv="10" ctrlrange="0 2.5"/>
    <position name="left_ankle_pitch_act" joint="left_ankle_pitch" kp="100" kv="8" ctrlrange="-0.7 0.7"/>
    <position name="left_ankle_roll_act" joint="left_ankle_roll" kp="100" kv="8" ctrlrange="-0.3 0.3"/>

    <!-- Right leg actuators (position control with PD gains) -->
    <position name="right_hip_yaw_act" joint="right_hip_yaw" kp="200" kv="10" ctrlrange="-0.5 0.5"/>
    <position name="right_hip_roll_act" joint="right_hip_roll" kp="200" kv="10" ctrlrange="-0.3 0.3"/>
    <position name="right_hip_pitch_act" joint="right_hip_pitch" kp="200" kv="10" ctrlrange="-1.5 1.5"/>
    <position name="right_knee_pitch_act" joint="right_knee_pitch" kp="150" kv="10" ctrlrange="0 2.5"/>
    <position name="right_ankle_pitch_act" joint="right_ankle_pitch" kp="100" kv="8" ctrlrange="-0.7 0.7"/>
    <position name="right_ankle_roll_act" joint="right_ankle_roll" kp="100" kv="8" ctrlrange="-0.3 0.3"/>
  </actuator>
</mujoco>
